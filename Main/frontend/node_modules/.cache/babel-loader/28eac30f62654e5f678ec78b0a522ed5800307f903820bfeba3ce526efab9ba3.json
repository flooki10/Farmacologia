{"ast":null,"code":"import axios from 'axios';\nasync function buscarAlelosGen(gen) {\n  try {\n    const response = await axios.get(`https://api.cpicpgx.org/v1/allele?genesymbol=eq.${gen}`);\n    return Array.from(new Set(response.data.map(item => item.name))).sort();\n  } catch (error) {\n    console.error('Error al buscar alelos del gen:', error);\n    throw new Error('Error al buscar alelos del gen');\n  }\n}\nasync function ID_CPIC_Farmaco(nombreFarmaco) {\n  try {\n    const response = await axios.get(`https://api.cpicpgx.org/v1/drug?name=eq.${nombreFarmaco}`);\n    return response.data.length > 0 ? response.data[0].drugid : '';\n  } catch (error) {\n    console.error('Error al buscar el ID del fármaco:', error);\n    throw new Error('Error al buscar el ID del fármaco');\n  }\n}\n_c = ID_CPIC_Farmaco;\nasync function fenotipoSegunAlelos(gen, alelo1, alelo2) {\n  try {\n    const response = await axios.get(`https://api.cpicpgx.org/v1/diplotype?genesymbol=eq.${gen}&diplotype=eq.${alelo1}/${alelo2}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al buscar fenotipo según alelos:', error);\n    throw new Error('Error al buscar fenotipo según alelos');\n  }\n}\nasync function urlGuia(farmaco) {\n  try {\n    const response = await axios.get(`https://api.cpicpgx.org/v1/drug?name=eq.${farmaco}&select=guideline_for_drug(*)`);\n    return response.data.length > 0 && response.data[0].guideline_for_drug ? response.data[0].guideline_for_drug.url : '';\n  } catch (error) {\n    console.error('Error al buscar la URL de la guía:', error);\n    throw new Error('Error al buscar la URL de la guía');\n  }\n}\nasync function recomendacionClinica(gen, alelo1, alelo2, farmaco) {\n  try {\n    const fenotipo = await fenotipoSegunAlelos(gen, alelo1, alelo2);\n    if (fenotipo.length > 0) {\n      const lookupkey = fenotipo[0].lookupkey;\n      const ID_Farmaco = await ID_CPIC_Farmaco(farmaco);\n      const response = await axios.get(`https://api.cpicpgx.org/v1/recommendation?select=drug(name), guideline(name), * &drugid=eq.${ID_Farmaco}&lookupkey=cs.${JSON.stringify(lookupkey)}`);\n      if (response.data.length > 0) {\n        const guiaURL = await urlGuia(farmaco);\n        return [fenotipo[0].generesult, response.data[0].drugrecommendation, response.data[0].guideline.name, guiaURL];\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('Error al buscar recomendación clínica:', error);\n    throw new Error('Error al buscar recomendación clínica');\n  }\n}\nexport { buscarAlelosGen, ID_CPIC_Farmaco, fenotipoSegunAlelos, urlGuia, recomendacionClinica };\nvar _c;\n$RefreshReg$(_c, \"ID_CPIC_Farmaco\");","map":{"version":3,"names":["axios","buscarAlelosGen","gen","response","get","Array","from","Set","data","map","item","name","sort","error","console","Error","ID_CPIC_Farmaco","nombreFarmaco","length","drugid","_c","fenotipoSegunAlelos","alelo1","alelo2","urlGuia","farmaco","guideline_for_drug","url","recomendacionClinica","fenotipo","lookupkey","ID_Farmaco","JSON","stringify","guiaURL","generesult","drugrecommendation","guideline","$RefreshReg$"],"sources":["C:/Users/walid/Desktop/Frama/Farma/Main/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nasync function buscarAlelosGen(gen) {\r\n  try {\r\n    const response = await axios.get(`https://api.cpicpgx.org/v1/allele?genesymbol=eq.${gen}`);\r\n    return Array.from(new Set(response.data.map(item => item.name))).sort();\r\n  } catch (error) {\r\n    console.error('Error al buscar alelos del gen:', error);\r\n    throw new Error('Error al buscar alelos del gen');\r\n  }\r\n}\r\n\r\nasync function ID_CPIC_Farmaco(nombreFarmaco) {\r\n  try {\r\n    const response = await axios.get(`https://api.cpicpgx.org/v1/drug?name=eq.${nombreFarmaco}`);\r\n    return response.data.length > 0 ? response.data[0].drugid : '';\r\n  } catch (error) {\r\n    console.error('Error al buscar el ID del fármaco:', error);\r\n    throw new Error('Error al buscar el ID del fármaco');\r\n  }\r\n}\r\n\r\nasync function fenotipoSegunAlelos(gen, alelo1, alelo2) {\r\n  try {\r\n    const response = await axios.get(`https://api.cpicpgx.org/v1/diplotype?genesymbol=eq.${gen}&diplotype=eq.${alelo1}/${alelo2}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al buscar fenotipo según alelos:', error);\r\n    throw new Error('Error al buscar fenotipo según alelos');\r\n  }\r\n}\r\n\r\nasync function urlGuia(farmaco) {\r\n  try {\r\n    const response = await axios.get(`https://api.cpicpgx.org/v1/drug?name=eq.${farmaco}&select=guideline_for_drug(*)`);\r\n    return response.data.length > 0 && response.data[0].guideline_for_drug ? response.data[0].guideline_for_drug.url : '';\r\n  } catch (error) {\r\n    console.error('Error al buscar la URL de la guía:', error);\r\n    throw new Error('Error al buscar la URL de la guía');\r\n  }\r\n}\r\n\r\nasync function recomendacionClinica(gen, alelo1, alelo2, farmaco) {\r\n  try {\r\n    const fenotipo = await fenotipoSegunAlelos(gen, alelo1, alelo2);\r\n    if (fenotipo.length > 0) {\r\n      const lookupkey = fenotipo[0].lookupkey;\r\n      const ID_Farmaco = await ID_CPIC_Farmaco(farmaco);\r\n      const response = await axios.get(`https://api.cpicpgx.org/v1/recommendation?select=drug(name), guideline(name), * &drugid=eq.${ID_Farmaco}&lookupkey=cs.${JSON.stringify(lookupkey)}`);\r\n      if (response.data.length > 0) {\r\n        const guiaURL = await urlGuia(farmaco);\r\n        return [\r\n          fenotipo[0].generesult,\r\n          response.data[0].drugrecommendation,\r\n          response.data[0].guideline.name,\r\n          guiaURL\r\n        ];\r\n      }\r\n    }\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Error al buscar recomendación clínica:', error);\r\n    throw new Error('Error al buscar recomendación clínica');\r\n  }\r\n}\r\n\r\n\r\n\r\nexport {\r\n  buscarAlelosGen,\r\n  ID_CPIC_Farmaco,\r\n  fenotipoSegunAlelos,\r\n  urlGuia,\r\n  recomendacionClinica,\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}